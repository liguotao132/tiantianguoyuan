function handleKeyboard(e){e.originalEvent&&(e=e.originalEvent);var t=e.keyCode||e.charCode;if(!s.params.allowSwipeToNext&&(s.isHorizontal()&&39===t||!s.isHorizontal()&&40===t))return!1;if(!s.params.allowSwipeToPrev&&(s.isHorizontal()&&37===t||!s.isHorizontal()&&38===t))return!1;if(!(e.shiftKey||e.altKey||e.ctrlKey||e.metaKey||document.activeElement&&document.activeElement.nodeName&&("input"===document.activeElement.nodeName.toLowerCase()||"textarea"===document.activeElement.nodeName.toLowerCase()))){if(37===t||39===t||38===t||40===t){var n=!1;if(s.container.parents("."+s.params.slideClass).length>0&&0===s.container.parents("."+s.params.slideActiveClass).length)return;var o={left:window.pageXOffset,top:window.pageYOffset},r=window.innerWidth,a=window.innerHeight,l=s.container.offset();s.rtl&&(l.left=l.left-s.container[0].scrollLeft);for(var i=[[l.left,l.top],[l.left+s.width,l.top],[l.left,l.top+s.height],[l.left+s.width,l.top+s.height]],d=0;d<i.length;d++){var f=i[d];f[0]>=o.left&&f[0]<=o.left+r&&f[1]>=o.top&&f[1]<=o.top+a&&(n=!0)}if(!n)return}s.isHorizontal()?(37!==t&&39!==t||(e.preventDefault?e.preventDefault():e.returnValue=!1),(39===t&&!s.rtl||37===t&&s.rtl)&&s.slideNext(),(37===t&&!s.rtl||39===t&&s.rtl)&&s.slidePrev()):(38!==t&&40!==t||(e.preventDefault?e.preventDefault():e.returnValue=!1),40===t&&s.slideNext(),38===t&&s.slidePrev()),s.emit("onKeyPress",s,t)}}s.disableKeyboardControl=function(){s.params.keyboardControl=!1,$(document).off("keydown",handleKeyboard)},s.enableKeyboardControl=function(){s.params.keyboardControl=!0,$(document).on("keydown",handleKeyboard)};