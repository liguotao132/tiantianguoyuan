!function(){"use strict";function s(s,e,r){var p="        ",i=s.path.split("src/js/")[1];if(-1!==["wrap-start.js","wrap-start-umd.js","wrap-end.js","wrap-end-umd.js","amd.js"].indexOf(i)&&(p=""),"swiper-intro.js"!==i&&"swiper-intro-f7.js"!==i&&"swiper-outro.js"!==i&&"dom.js"!==i&&"get-dom-lib.js"!==i&&"get-jquery.js"!==i&&"dom-plugins.js"!==i&&"swiper-proto.js"!==i||(p="    "),r&&(p=p.substring(4)),""!==p){for(var t=g.readFileSync(s.path).toString().split("\n"),n="",a=0;a<t.length;a++)n+=p+t[a]+(a===t.length?"":"\n");s.contents=new Buffer(n)}}var e=require("gulp"),r=require("gulp-connect"),p=require("gulp-open"),i=require("gulp-less"),t=require("gulp-rename"),n=require("gulp-header"),a=require("path"),c=require("gulp-uglify"),o=require("gulp-sourcemaps"),j=require("gulp-clean-css"),l=require("gulp-tap"),u=require("gulp-concat"),d=require("gulp-jshint"),m=require("jshint-stylish"),g=require("fs"),y={root:"./",build:{root:"build/",styles:"build/css/",scripts:"build/js/"},custom:{root:"custom/",styles:"custom/css/",scripts:"custom/js/"},dist:{root:"dist/",styles:"dist/css/",scripts:"dist/js/"},playground:{root:"playground/"},source:{root:"src/",styles:"src/less/",scripts:"src/js/*.js"}},f={filename:"swiper",jsFiles:["src/js/wrap-start.js","src/js/swiper-intro.js","src/js/core.js","src/js/effects.js","src/js/lazy-load.js","src/js/scrollbar.js","src/js/controller.js","src/js/hashnav.js","src/js/history.js","src/js/keyboard.js","src/js/mousewheel.js","src/js/parallax.js","src/js/zoom.js","src/js/plugins.js","src/js/emitter.js","src/js/a11y.js","src/js/init.js","src/js/swiper-outro.js","src/js/swiper-proto.js","src/js/dom.js","src/js/get-dom-lib.js","src/js/dom-plugins.js","src/js/wrap-end.js","src/js/amd.js"],jQueryFiles:["src/js/wrap-start.js","src/js/swiper-intro.js","src/js/core.js","src/js/effects.js","src/js/lazy-load.js","src/js/scrollbar.js","src/js/controller.js","src/js/hashnav.js","src/js/history.js","src/js/keyboard.js","src/js/mousewheel.js","src/js/parallax.js","src/js/zoom.js","src/js/plugins.js","src/js/emitter.js","src/js/a11y.js","src/js/init.js","src/js/swiper-outro.js","src/js/swiper-proto.js","src/js/get-dom-lib.js","src/js/dom-plugins.js","src/js/wrap-end.js","src/js/amd.js"],jQueryUMDFiles:["src/js/wrap-start-umd.js","src/js/swiper-intro.js","src/js/core.js","src/js/effects.js","src/js/lazy-load.js","src/js/scrollbar.js","src/js/controller.js","src/js/hashnav.js","src/js/history.js","src/js/keyboard.js","src/js/mousewheel.js","src/js/parallax.js","src/js/zoom.js","src/js/plugins.js","src/js/emitter.js","src/js/a11y.js","src/js/init.js","src/js/swiper-outro.js","src/js/swiper-proto.js","src/js/get-jquery.js","src/js/dom-plugins.js","src/js/wrap-end-umd.js"],Framework7Files:["src/js/swiper-intro-f7.js","src/js/core.js","src/js/effects.js","src/js/lazy-load.js","src/js/scrollbar.js","src/js/controller.js","src/js/parallax.js","src/js/zoom.js","src/js/plugins.js","src/js/emitter.js","src/js/a11y.js","src/js/init.js","src/js/swiper-outro.js","src/js/swiper-proto.js"],pkg:require("./bower.json"),modules:require("./modules.json"),banner:["/**"," * Swiper <%= pkg.version %>"," * <%= pkg.description %>"," * "," * <%= pkg.homepage %>"," * "," * Copyright <%= date.year %>, <%= pkg.author %>"," * The iDangero.us"," * http://www.idangero.us/"," * ",' * Licensed under <%= pkg.license.join(" & ") %>'," * "," * Released on: <%= date.month %> <%= date.day %>, <%= date.year %>"," */",""].join("\n"),customBanner:["/**"," * Swiper <%= pkg.version %> - Custom Build"," * <%= pkg.description %>"," * "," * Included modules: <%= modulesList %>"," * "," * <%= pkg.homepage %>"," * "," * Copyright <%= date.year %>, <%= pkg.author %>"," * The iDangero.us"," * http://www.idangero.us/"," * ",' * Licensed under <%= pkg.license.join(" & ") %>'," * "," * Released on: <%= date.month %> <%= date.day %>, <%= date.year %>"," */",""].join("\n"),date:{year:(new Date).getFullYear(),month:"January February March April May June July August September October November December".split(" ")[(new Date).getMonth()],day:(new Date).getDate()}};e.task("scripts",function(p){e.src(f.jsFiles).pipe(l(function(e,r){s(e)})).pipe(o.init()).pipe(u(f.filename+".js")).pipe(n(f.banner,{pkg:f.pkg,date:f.date})).pipe(d()).pipe(d.reporter(m)).pipe(o.write("./maps/")).pipe(e.dest(y.build.scripts)),e.src(f.jQueryFiles).pipe(l(function(e,r){s(e)})).pipe(o.init()).pipe(u(f.filename+".jquery.js")).pipe(n(f.banner,{pkg:f.pkg,date:f.date})).pipe(o.write("./maps/")).pipe(e.dest(y.build.scripts)),e.src(f.jQueryUMDFiles).pipe(l(function(e,r){s(e)})).pipe(o.init()).pipe(u(f.filename+".jquery.umd.js")).pipe(n(f.banner,{pkg:f.pkg,date:f.date})).pipe(o.write("./maps/")).pipe(e.dest(y.build.scripts)),e.src(f.Framework7Files).pipe(l(function(e,r){s(e,0,!0)})).pipe(o.init()).pipe(u(f.filename+".framework7.js")).pipe(n(f.banner,{pkg:f.pkg,date:f.date})).pipe(o.write("./maps/")).pipe(e.dest(y.build.scripts)).pipe(r.reload()),p()}),e.task("styles",function(s){e.src(y.source.styles+"swiper.less").pipe(i({paths:[a.join(__dirname,"less","includes")]})).pipe(n(f.banner,{pkg:f.pkg,date:f.date})).pipe(t(function(s){s.basename=f.filename})).pipe(e.dest(y.build.styles)).pipe(r.reload()),e.src([y.source.styles+"core.less",y.source.styles+"navigation-f7.less",y.source.styles+"effects.less",y.source.styles+"zoom.less",y.source.styles+"scrollbar.less",y.source.styles+"preloader-f7.less"]).pipe(u(f.filename+".framework7.less")).pipe(n("/* === Swiper === */\n")).pipe(e.dest(y.build.styles)),s()}),e.task("build",["scripts","styles"],function(s){s()}),e.task("dist",function(){e.src([y.build.scripts+f.filename+".js"]).pipe(e.dest(y.dist.scripts)).pipe(o.init()).pipe(c()).pipe(n(f.banner,{pkg:f.pkg,date:f.date})).pipe(t(function(s){s.basename=f.filename+".min"})).pipe(o.write("./maps")).pipe(e.dest(y.dist.scripts)),e.src([y.build.scripts+f.filename+".jquery.js"]).pipe(e.dest(y.dist.scripts)).pipe(o.init()).pipe(c()).pipe(n(f.banner,{pkg:f.pkg,date:f.date})).pipe(t(function(s){s.basename=f.filename+".jquery.min"})).pipe(o.write("./maps")).pipe(e.dest(y.dist.scripts)),e.src([y.build.scripts+f.filename+".jquery.umd.js"]).pipe(e.dest(y.dist.scripts)).pipe(o.init()).pipe(c()).pipe(n(f.banner,{pkg:f.pkg,date:f.date})).pipe(t(function(s){s.basename=f.filename+".jquery.umd.min"})).pipe(o.write("./maps")).pipe(e.dest(y.dist.scripts)),e.src(y.build.styles+"*.css").pipe(e.dest(y.dist.styles)).pipe(j({advanced:!1,aggressiveMerging:!1})).pipe(n(f.banner,{pkg:f.pkg,date:f.date})).pipe(t(function(s){s.basename=f.filename+".min"})).pipe(e.dest(y.dist.styles))}),e.task("custom",function(){var r=process.argv.slice(3);r=""===(r=r.toString())?[]:(r=r.substring(1).replace(/ /g,"").replace(/,,/g,",")).split(",");var p,o,g=[],h=[];for(g.push.apply(g,f.modules.core_intro.js),h.push.apply(h,f.modules.core_intro.less),p=0;p<r.length;p++)(o=f.modules[r[p]])&&(o.dependencies&&o.dependencies.length>0&&r.push.apply(r,o.dependencies),o.js.length>0&&g.push.apply(g,o.js),o.less&&o.less.length>0&&h.push.apply(h,o.less));g.push.apply(g,f.modules.core_outro.js),h.push.apply(h,f.modules.core_outro.less);var w=[],k=[];for(p=0;p<g.length;p++)w.indexOf(g[p])<0&&w.push(g[p]);for(p=0;p<h.length;p++)k.indexOf(h[p])<0&&k.push(h[p]);e.src(w).pipe(l(function(e,r){s(e)})).pipe(u(f.filename+".custom.js")).pipe(n(f.customBanner,{pkg:f.pkg,date:f.date,modulesList:r.join(",")})).pipe(d()).pipe(d.reporter(m)).pipe(e.dest(y.custom.scripts)).pipe(c()).pipe(n(f.customBanner,{pkg:f.pkg,date:f.date,modulesList:r.join(",")})).pipe(t(function(s){s.basename=s.basename+".min"})).pipe(e.dest(y.custom.scripts)),e.src(k).pipe(u(f.filename+".custom.less")).pipe(i({paths:[a.join(__dirname,"less","includes")]})).pipe(n(f.customBanner,{pkg:f.pkg,date:f.date,modulesList:r.join(",")})).pipe(e.dest(y.custom.styles)).pipe(j({advanced:!1,aggressiveMerging:!1})).pipe(n(f.customBanner,{pkg:f.pkg,date:f.date,modulesList:r.join(",")})).pipe(t(function(s){s.basename=s.basename+".min"})).pipe(e.dest(y.custom.styles))}),e.task("watch",function(){e.watch(y.source.scripts,["scripts"]),e.watch(y.source.styles+"*.less",["styles"])}),e.task("connect",function(){return r.server({root:[y.root],livereload:!0,port:"3000"})}),e.task("open",function(){return e.src(y.playground.root+"index.html").pipe(p({uri:"http://localhost:3000/"+y.playground.root+"index.html"}))}),e.task("server",["watch","connect","open"]),e.task("default",["server"])}();